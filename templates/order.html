{% extends "base.html" %}

{% block title %}Place Order | Z≈Ç√≥≈º zam√≥wienie{% endblock %}

{% block content %}
<div style="position:fixed;top:0.5rem;left:0.5rem;z-index:99999;background:#ff0033;color:#fff600;padding:1rem 1.25rem;border:4px solid #000;font-size:1.15rem;font-weight:900;letter-spacing:0.03em;text-transform:uppercase;box-shadow:0 0 0 4px #fff,0 12px 28px rgba(0,0,0,0.45);max-width:min(90vw,760px);line-height:1.3;">
  ORDER UI NEW TEMPLATE LIVE | {{ order_ui_template_name }} | {{ order_ui_git_sha }}
</div>

<div class="order-page">
  <header class="topbar card-shell">
    <div class="topbar-left">
      <h1>Z≈Ç√≥≈º zam√≥wienie</h1>
      <span class="delivery-pill">Dostawa: dzi≈õ</span>
    </div>

    <div class="topbar-center">
      <label class="sr-only" for="company-select">Wybierz firmƒô</label>
      <select id="company-select" class="company-select" aria-label="Wybierz firmƒô">
        <option selected>Wybierz firmƒô</option>
        <option>Acme Sp. z o.o.</option>
        <option>Tech Park Logistics</option>
        <option>North Factory Team</option>
      </select>
    </div>

    <div class="topbar-right">
      <div class="code-block">
        <span class="postal-code">Kod: 66-400</span>
        <a href="#" aria-label="Zmie≈Ñ kod w profilu">Zmie≈Ñ w profilu</a>
      </div>
      <div class="icon-group" aria-hidden="true">
        <span>‚úâÔ∏è</span>
        <span>üë§</span>
      </div>
    </div>
  </header>

  <main class="order-layout">
    <section class="menu-panel card-shell" aria-label="Menu">
      <header class="menu-heading">
        <h2>Menu na: DZI≈ö (wt, 18.02)</h2>
        <p>Zam√≥wienia przyjmujemy do <strong>11:00</strong></p>
      </header>

      <nav class="category-tabs" aria-label="Kategorie menu">
        <button class="tab active" type="button">Dania dnia</button>
        <button class="tab" type="button">Zupy</button>
        <button class="tab" type="button">Drugie</button>
        <button class="tab" type="button">Fit</button>
        <button class="tab" type="button">Napoje</button>
        <button class="tab" type="button">Dodatki</button>
      </nav>

      <div class="menu-grid">
        {% for item in menu_items %}
        {% set state = namespace(qty=0) %}
        {% for cart in cart_items %}
          {% if cart.name == item.name %}
            {% set state.qty = cart.qty %}
          {% endif %}
        {% endfor %}
        {% set badge_cycle = ['STANDARD', 'WEGE', 'NOWE'] %}
        {% set badge = badge_cycle[(loop.index0 % 3)] %}

        <article class="menu-card" data-menu-card>
          <img class="menu-thumb" src="/static/placeholder_food.svg" alt="Zdjƒôcie dania {{ item.name }}" loading="lazy" />

          <div class="menu-card-content">
            <div class="menu-copy">
              <h3>{{ item.name }}</h3>
              <p>{{ item.description }}</p>
            </div>

            <div class="menu-meta">
              <span class="badge {{ badge | lower }}">{{ badge }}</span>
              <div class="price-row">
                <span class="price">{{ item.price }}</span>
                <button
                  type="button"
                  class="add-btn"
                  data-add-btn
                  {% if state.qty > 0 %}hidden{% endif %}
                >
                  Dodaj
                </button>
                <div
                  class="qty-stepper"
                  data-qty-control
                  {% if state.qty == 0 %}hidden{% endif %}
                >
                  <button type="button" aria-label="Zmniejsz ilo≈õƒá" data-action="decrease">‚àí</button>
                  <span data-qty>{{ state.qty }}</span>
                  <button type="button" aria-label="Zwiƒôksz ilo≈õƒá" data-action="increase">+</button>
                </div>
              </div>
            </div>
          </div>
        </article>
        {% endfor %}
      </div>
    </section>

    <aside class="cart-panel card-shell" aria-label="Koszyk">
      <h2>Tw√≥j koszyk</h2>

      <ul class="cart-list">
        {% for item in cart_items %}
        <li>
          <div>
            <strong>‚≠ê {{ item.name }}</strong>
            <small>{{ item.qty }} √ó {{ item.price }}</small>
          </div>
        </li>
        {% endfor %}
      </ul>

      <label class="sr-only" for="cart-note">Uwagi do zam√≥wienia</label>
      <textarea id="cart-note" rows="3" placeholder="Uwagi do zam√≥wienia..."></textarea>

      <div class="payment-row" role="group" aria-label="Metoda p≈Çatno≈õci">
        <button class="pay-btn blik" type="button">BLIK</button>
        <button class="pay-btn" type="button">Karta</button>
        <button class="pay-btn" type="button">Got√≥wka</button>
      </div>

      <dl class="summary-lines">
        <div>
          <dt>Suma:</dt>
          <dd>{{ total }}</dd>
        </div>
        <div>
          <dt>Dostawa:</dt>
          <dd>5,00 z≈Ç</dd>
        </div>
        <div>
          <dt>Dostawa:</dt>
          <dd>12:00‚Äì13:00</dd>
        </div>
      </dl>

      <button type="button" class="checkout-btn">Zamawiam i p≈Çacƒô</button>
      <p class="cart-footnote">To zam√≥wienie zostanie zrealizowane <a href="#">dajdaj</a></p>
    </aside>
  </main>
</div>

<footer class="order-ui-build-badge" aria-label="Order UI build marker">
  ORDER_UI_BUILD: {{ order_ui_build }}
</footer>
{% endblock %}
