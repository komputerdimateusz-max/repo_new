{% extends "base.html" %}

{% block title %}Place Order | Złóż zamówienie{% endblock %}

{% block content %}
<div class="order-page" data-order-page>
  <header class="topbar card-shell">
    <div class="topbar-left">
      <h1>Złóż zamówienie</h1>
      <span class="delivery-pill">Dostawa: dziś</span>
    </div>

    <div class="topbar-center">
      <label class="sr-only" for="company-select">Wybierz firmę</label>
      <select id="company-select" class="company-select" aria-label="Wybierz firmę" data-company-select>
        <option value="">Wybierz firmę</option>
      </select>
    </div>

    <div class="topbar-right">
      <div class="code-block">
        <span class="postal-code" data-user-email>{{ session.get('username', user_email) }} ({{ session.get('role', 'CUSTOMER') }})</span>
        {% if session.get('role') == 'ADMIN' %}<a href="/admin">Admin</a>{% endif %}
        {% if session.get('role') == 'RESTAURANT' %}<a href="/restaurant">Panel restauracji</a>{% endif %}
        {% if session.get('role') == 'CUSTOMER' %}<a href="/profile" aria-label="Przejdź do profilu">Zmień w profilu</a>{% endif %}
        <form method="post" action="/logout" style="display:inline;"><button type="submit" aria-label="Wyloguj" style="background:none;border:none;color:#1f58d6;cursor:pointer;padding:0;">Wyloguj</button></form>
      </div>
    </div>
  </header>

  <main class="order-layout">
    <section class="menu-panel card-shell" aria-label="Menu">
      <header class="menu-heading">
        <h2 data-menu-title>Menu na: DZIŚ</h2>
        <p>Zamówienia przyjmujemy do <strong data-cutoff-time>--:--</strong></p>
        <p data-cutoff-banner hidden style="color:#b42318;font-weight:700;">Zamówienia na dziś są zamknięte.</p>
      </header>

      <nav class="category-tabs" aria-label="Kategorie menu" data-category-tabs></nav>

      <div class="menu-grid" data-menu-grid></div>
    </section>

    <aside class="cart-panel card-shell" aria-label="Koszyk">
      <h2>Twój koszyk</h2>
      <p data-inline-message hidden></p>
      <div data-company-required-banner hidden style="background:#fef3f2;color:#b42318;padding:8px;border-radius:8px;">Wybierz firmę w profilu aby zamówić. <a href="/profile">Przejdź do profilu</a></div>
      <div data-order-confirmation></div>
      <ul class="cart-list" data-cart-list></ul>

      <label class="sr-only" for="cart-note">Uwagi do zamówienia</label>
      <textarea id="cart-note" rows="3" placeholder="Uwagi do zamówienia..." data-cart-notes></textarea>

      <div class="payment-row" role="group" aria-label="Metoda płatności">
        <button class="pay-btn" type="button" data-payment-method="BLIK">BLIK</button>
        <button class="pay-btn" type="button" data-payment-method="KARTA">Karta</button>
        <button class="pay-btn" type="button" data-payment-method="GOTOWKA">Gotówka</button>
      </div>

      <dl class="summary-lines">
        <div>
          <dt>Suma:</dt>
          <dd data-summary-subtotal>0,00 zł</dd>
        </div>
        <div>
          <dt>Dostawa:</dt>
          <dd data-summary-delivery>0,00 zł</dd>
        </div>
        <div>
          <dt>Okno:</dt>
          <dd data-summary-window>--:--–--:--</dd>
        </div>
        <div>
          <dt>Razem:</dt>
          <dd data-summary-total>0,00 zł</dd>
        </div>
      </dl>

      <button type="button" class="checkout-btn" data-checkout-btn disabled>Zamawiam i płacę</button>
      <a href="/my-order">Moje zamówienie (dziś)</a>
      <div data-my-orders></div>
      <p class="cart-footnote">To zamówienie zostanie zrealizowane dzisiaj.</p>
    </aside>
  </main>
</div>

{% if debug_ui %}<footer class="order-ui-build-badge" aria-label="Order UI build marker">ORDER_UI_BUILD: {{ order_ui_build }}</footer>{% endif %}
{% endblock %}
