<!doctype html><html><body>
<h1>Menu items</h1>
<p>{{ current_username|default("Guest") }} ({{ current_user_role|default("RESTAURANT") }}) • <a href="/restaurant">Panel restauracji</a></p>

<h2>Add new item</h2>
<form method="post" action="/restaurant/menu">
  <input type="text" name="name" placeholder="name" required />
  <textarea name="description" placeholder="description"></textarea>
  <input type="number" name="price" step="0.01" placeholder="price" required />
  <select name="category">
    {% for category in categories %}
    <option value="{{ category }}">{{ category }}</option>
    {% endfor %}
  </select>
  <label><input type="checkbox" name="is_active" value="true" checked /> Active</label>
  <button type="submit">Dodaj do menu</button>
</form>

<table border="1" cellpadding="6">
<tr><th>ID</th><th>Name</th><th>Description</th><th>Price</th><th>Category</th><th>Active</th><th>Action</th></tr>
{% for item in items %}
<tr{% if not item.is_active %} style="opacity:0.6"{% endif %}>
  <td>{{ item.id }}</td>
  <td>{{ item.name }}</td>
  <td>{{ item.description or '' }}</td>
  <td>{{ item.price }}</td>
  <td>{{ item.category }}</td>
  <td>{{ item.is_active if item.is_active else 'Inactive' }}</td>
  <td>
    <a href="/restaurant/menu/{{ item.id }}/edit">Edytuj</a>
    |
    <form method="post" action="/restaurant/menu/{{ item.id }}/toggle" style="display:inline">
      <button type="submit">{{ 'Wyłącz' if item.is_active else 'Włącz' }}</button>
    </form>
  </td>
</tr>
{% endfor %}
</table>
<a href="/restaurant">Back</a>
</body></html>
