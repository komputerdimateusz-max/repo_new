<!doctype html><html><body>
<h1>Login</h1>
{% if message %}<p>{{ message }}</p>{% endif %}
<input type="email" id="email" placeholder="email" required />
<input type="text" id="code" placeholder="magic code" />
<button id="send">Send code</button>
<button id="login">Login</button>
<p id="msg"></p>
<script>
const email=()=>document.getElementById('email').value;
document.getElementById('send').onclick=async()=>{await fetch('/login/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email()})});document.getElementById('msg').textContent='Code sent (see server logs).';};
document.getElementById('login').onclick=async()=>{const r=await fetch('/login/verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email(),code:document.getElementById('code').value})});if(r.redirected)window.location=r.url;};
</script>
</body></html>
