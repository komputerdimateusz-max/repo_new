{% extends "base.html" %}

{% block title %}repo_new | Dashboard{% endblock %}
{% block container_class %}container-wide{% endblock %}

{% block content %}
<div class="page-container stack-lg">
  <header class="page-header">
    <div>
      {% if current_user.role == "customer" %}
      <h1>{{ t('dashboard.title', lang) }} – {{ current_user.username }}</h1>
      {% elif current_user.role == "restaurant" %}
      <h1>{{ t('dashboard.title', lang) }} – {{ current_user.restaurant.name }}</h1>
      {% elif current_user.role == "admin" %}
      <h1>{{ t('dashboard.title', lang) }} – Administrator</h1>
      {% endif %}
      <p class="lead">{{ t('dashboard.lead', lang) }}</p>
    </div>
    <span class="role-pill">{{ t('role.' ~ current_user.role, lang) }}</span>
  </header>

  {% if message and current_user.role != 'restaurant' %}
  <p class="alert alert-success panel-alert" role="status">{{ message }}</p>
  {% endif %}

  {% if current_user.role == 'customer' %}
  <section class="section" aria-label="{{ t('dashboard.user_actions_label', lang) }}">
    <h2 class="section-heading">Zamówienia</h2>
    <div class="card-grid">
      <a href="/order" class="card-link" aria-label="{{ t('dashboard.place_order_tile', lang) }}">
        <div class="card card-primary tile-card">
          <h3>{{ t('dashboard.place_order_tile', lang) }}</h3>
          <p class="lead">{{ t('dashboard.place_order_description', lang) }}</p>
        </div>
      </a>

      <a href="/menu" class="card-link" aria-label="{{ t('dashboard.today_menu', lang) }}">
        <div class="card tile-card">
          <h3>{{ t('dashboard.today_menu', lang) }}</h3>
          <p class="lead">{{ t('dashboard.card_menu_description', lang) }}</p>
        </div>
      </a>

      <a href="/orders" class="card-link" aria-label="{{ t('dashboard.my_orders', lang) }}">
        <div class="card tile-card">
          <h3>{{ t('dashboard.my_orders', lang) }}</h3>
          <p class="lead">{{ t('dashboard.card_orders_description', lang) }}</p>
        </div>
      </a>
    </div>
  </section>
  {% endif %}

  {% if current_user.role == 'restaurant' %}
  <section class="section" aria-label="Narzędzia restauracji">
    <h2 class="section-heading">Narzędzia restauracji</h2>
    <p class="section-subtitle">Najczęściej używane działania dla Twojej restauracji.</p>
    <div class="card-grid">
      <a href="/catering/menu" class="card-link" aria-label="{{ t('dashboard.add_today_menu', lang) }}">
        <div class="card tile-card">
          <h3>{{ t('dashboard.add_today_menu', lang) }}</h3>
          <p class="lead">{{ t('dashboard.add_today_menu_description', lang) }}</p>
        </div>
      </a>
      <a href="/catering/orders" class="card-link" aria-label="{{ t('dashboard.catering_orders', lang) }}">
        <div class="card tile-card">
          <h3>{{ t('dashboard.catering_orders', lang) }}</h3>
          <p class="lead">{{ t('dashboard.catering_orders_description', lang) }}</p>
        </div>
      </a>
      <a href="/restaurant/opening-hours" class="card-link" aria-label="Opening hours">
        <div class="card tile-card">
          <h3>Opening hours</h3>
          <p class="lead">Manage your restaurant opening hours.</p>
        </div>
      </a>
      <a href="/restaurant/coverage" class="card-link" aria-label="Delivery coverage">
        <div class="card tile-card">
          <h3>Delivery coverage</h3>
          <p class="lead">Manage served locations and cut-off overrides.</p>
        </div>
      </a>
    </div>
  </section>
  {% endif %}

  {% if current_user.role == 'admin' %}
  <section class="section" aria-label="Narzędzia administratora">
    <h2 class="section-heading">Narzędzia administratora</h2>
    <p class="section-subtitle">Konfiguracja kont i uprawnień systemowych.</p>
    <div class="card-grid">
      <a href="/settings" class="card-link" aria-label="{{ t('nav.settings', lang) }}">
        <div class="card tile-card">
          <h3>{{ t('nav.settings', lang) }}</h3>
          <p class="lead">{{ t('settings.title', lang) }}</p>
        </div>
      </a>
    </div>
  </section>
  {% endif %}

  <p><a class="text-link" href="/">{{ t('back.home', lang) }}</a></p>
</div>
{% endblock %}
