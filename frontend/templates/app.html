{% extends "base.html" %}

{% block title %}repo_new | Dashboard{% endblock %}

{% block content %}
<header class="stack-md">
  {% if current_user.role == "customer" %}
  <h1>{{ t('dashboard.title', lang) }} – {{ current_user.username }}</h1>
  {% elif current_user.role == "restaurant" %}
  <h1>{{ t('dashboard.title', lang) }} – {{ current_user.restaurant.name }}</h1>
  {% elif current_user.role == "admin" %}
  <h1>{{ t('dashboard.title', lang) }} – Administrator</h1>
  {% endif %}
  <p class="lead">{{ t('dashboard.lead', lang) }}</p>
</header>

{% if message and current_user.role != 'restaurant' %}
<p class="alert alert-success" role="status">{{ message }}</p>
{% endif %}

{% if current_user.role == 'customer' %}
<section class="stack-md" aria-label="{{ t('dashboard.user_actions_label', lang) }}">
  <a href="/order" class="card-link" aria-label="{{ t('dashboard.place_order_tile', lang) }}">
    <div class="card card-primary">
      <h3>{{ t('dashboard.place_order_tile', lang) }}</h3>
      <p class="lead">{{ t('dashboard.place_order_description', lang) }}</p>
    </div>
  </a>

  <a href="/menu" class="card-link" aria-label="{{ t('dashboard.today_menu', lang) }}">
    <div class="card">
      <h3>{{ t('dashboard.today_menu', lang) }}</h3>
      <p class="lead">{{ t('dashboard.card_menu_description', lang) }}</p>
    </div>
  </a>

  <a href="/orders" class="card-link" aria-label="{{ t('dashboard.my_orders', lang) }}">
    <div class="card">
      <h3>{{ t('dashboard.my_orders', lang) }}</h3>
      <p class="lead">{{ t('dashboard.card_orders_description', lang) }}</p>
    </div>
  </a>
</section>
{% endif %}

{% if current_user.role in ['admin', 'restaurant'] %}
<section class="stack-md top-gap-sm" aria-label="{{ t('dashboard.admin_tools', lang) }}">
  <h2 class="section-heading">{{ t('dashboard.admin_tools', lang) }}</h2>

  {% if current_user.role == 'restaurant' %}
  <a href="/catering/menu" class="card-link" aria-label="{{ t('dashboard.add_today_menu', lang) }}">
    <div class="card">
      <h3>{{ t('dashboard.add_today_menu', lang) }}</h3>
      <p class="lead">{{ t('dashboard.add_today_menu_description', lang) }}</p>
    </div>
  </a>
  <a href="/catering/orders" class="card-link" aria-label="{{ t('dashboard.catering_orders', lang) }}">
    <div class="card">
      <h3>{{ t('dashboard.catering_orders', lang) }}</h3>
      <p class="lead">{{ t('dashboard.catering_orders_description', lang) }}</p>
    </div>
  </a>
  <a href="/restaurant/opening-hours" class="card-link"><div class="card"><h3>Opening hours</h3><p class="lead">Manage your restaurant opening hours.</p></div></a>
  <a href="/restaurant/coverage" class="card-link"><div class="card"><h3>Delivery coverage</h3><p class="lead">Manage served locations and cut-off overrides.</p></div></a>
  {% elif current_user.role == 'admin' %}
  <a href="/settings" class="card-link" aria-label="{{ t('nav.settings', lang) }}">
    <div class="card">
      <h3>{{ t('nav.settings', lang) }}</h3>
      <p class="lead">{{ t('settings.title', lang) }}</p>
    </div>
  </a>
  {% endif %}
</section>
{% endif %}

<p class="top-gap-sm"><a class="text-link" href="/">{{ t('back.home', lang) }}</a></p>
{% endblock %}
