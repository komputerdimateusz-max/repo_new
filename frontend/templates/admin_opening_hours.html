{% extends "base.html" %}

{% block title %}{{ t('opening_hours.title', lang) }} Â· repo_new{% endblock %}

{% block content %}
<div class="page-container">
  <header class="page-header">
    <div>
      <h1 class="page-title">{{ t('opening_hours.title', lang) }}</h1>
      <p class="page-subtitle">{{ t('opening_hours.description', lang) }}</p>
    </div>
    <span class="pill pill--accent">{% if current_user.role == 'restaurant' %}Restaurant{% else %}Administrator{% endif %}</span>
  </header>

  {% if message %}
  <p class="alert alert-success" role="status">{{ message }}</p>
  {% endif %}

  {% if error %}
  <p class="alert alert-error" role="alert">{{ error }}</p>
  {% endif %}

  <section class="section">
    <h2 class="section-title">{{ t('opening_hours.current_window', lang).format(open_time=open_time, close_time=close_time) }}</h2>
    <div class="form-card">
      <form method="post" action="{{ '/restaurant/opening-hours' if current_user.role == 'restaurant' else '/admin/opening-hours' }}" class="stack-md">
        {% if current_user.role == "admin" %}
        <label class="field"><span>Restaurant</span>
          <select class="input" name="restaurant_id">
            {% for restaurant in restaurants %}
            <option value="{{ restaurant.id }}" {% if restaurant.id == selected_restaurant_id %}selected{% endif %}>{{ restaurant.name }}</option>
            {% endfor %}
          </select>
        </label>
        {% else %}
        <input type="hidden" name="restaurant_id" value="{{ selected_restaurant_id }}" />
        {% endif %}
        <label class="field">
          <span>{{ t('opening_hours.open_time', lang) }}</span>
          <input class="input" type="time" name="open_time" value="{{ open_time }}" required />
        </label>
        <label class="field">
          <span>{{ t('opening_hours.close_time', lang) }}</span>
          <input class="input" type="time" name="close_time" value="{{ close_time }}" required />
        </label>
        <button type="submit" class="btn btn--primary">{{ t('opening_hours.save', lang) }}</button>
      </form>
    </div>
  </section>
</div>
{% endblock %}
