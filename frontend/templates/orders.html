{% extends "base.html" %}

{% block title %}repo_new | {{ t('dashboard.my_orders', lang) }}{% endblock %}

{% block content %}
<div class="page-container">
  <header class="page-header">
    <div>
      <h1 class="page-title">{{ t('dashboard.my_orders', lang) }}</h1>
      <p class="page-subtitle">{{ t('orders.page_lead', lang) }}</p>
    </div>
    <span class="pill pill--accent">{% if current_user.role == 'customer' %}Customer{% elif current_user.role == 'restaurant' %}Restaurant{% else %}Administrator{% endif %}</span>
  </header>

  {% if message %}
  <p class="alert alert-success" role="status">{{ message }}</p>
  {% endif %}

  <section class="form-card" aria-label="My orders">
    <p><strong>{{ t('orders.selected_date', lang) }}:</strong> {{ selected_date.isoformat() }}</p>
    {% if tomorrow_order_exists and selected_date != tomorrow_date %}
    <p><a class="text-link" href="/orders?date={{ tomorrow_date.isoformat() }}">{{ t('orders.show_tomorrow', lang) }}</a></p>
    {% endif %}
    {% if order_items %}
    <ul>
      {% for item in order_items %}
      <li>{{ item.name }} × {{ item.quantity }} — {{ '%.2f'|format(item.line_total_cents / 100) }} PLN</li>
      {% endfor %}
    </ul>
    <p><strong>{{ t('dashboard.total', lang) }}: {{ '%.2f'|format(total_cents / 100) }} PLN</strong></p>
    {% else %}
    <p>{{ t('dashboard.no_orders', lang) }}</p>
    {% endif %}
  </section>
</div>
{% endblock %}
